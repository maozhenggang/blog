---
title: linux学习笔记一
date: 2016-01-09 12:09:10
tags: linux
categories: 技术
---

linux个人学习笔记第一部分、包括、简单概念部分、磁盘分区解释、linux文件系统、linux分区的命名、磁盘挂载、磁盘分区、linux目录结构、linux启动过程......<!-- more -->

## linux含义

linux is not unix

## Linux内核

内核包括
* 硬件
* 内存
* io
* vfs：内核不能兼容、文件系统可以、类似于虚拟机、实现通用
* 进程

## 硬盘分区解释
 
* 主分区：一般都是装操作系统的那个分区
* 扩展分区
* 逻辑分区：为了解决主分区和扩展分区只能分四个分区的问题、引入逻辑分区

```
主分区和扩展分区分区只能分四个分区、逻辑分区相当于是另一个主分区和扩展分区、实现更多的分区
```

## linux 文件系统
所有的东西在linux下都是文件、文件分两块
* 字符设备
	*  打印机
	*  鼠标、键盘 	
	*  等等
* 块设备
	* u盘
	* 光驱
	* 等等

## linux 分区的命名

名称：/dev/xxyN、解释如下：

* / ：根目录
	* /dev：代表所有设备文件所在的目录名称
	* xx ：分区前两个字母表示分区所在设备的类型、通常是hd(IDE磁盘) 、sd(SCSI磁盘)
	* y ：这个字母标明所在的设备。例如、/dev/hda(第一个IDE磁盘)或者/dev/sdb(第二个SCSI磁盘)
	* N：最后的数字代表分区。前四个分区(主分区或扩展分区)是用数字从1到4.逻辑分区从5开始。（逻辑分区永远从5开始）
		* /dev/hda3/：是在第一个IDE硬盘上的第三个主分区或扩展分区;
		* /dev/sdb6：是在第二个SCSI硬盘上的第二个逻辑分区;

好了为了更加理解、随便出了一道题目如下

下面那一个是第二个IDE驱动器上第四个逻辑分区的设备名称？
A：hdb4
B：hdb8
c：hdb5
d：hdb9

上述答案选B
```
为什么呢？四个答案都是hdb符合第一个条件IDE驱动、第二个条件是、第四个逻辑分区、第四个逻辑分区。上面说了、有两个知识点可以判断、
1：主分区和扩展分区、只能分四个、那说明从第四个开始、都是逻辑分区、意思就是从hdb4往后、都是逻辑分区、依次往后四个、就是hdb8了
2：逻辑分区永远从5开始、那就简单了、第五个开始就是逻辑分区、那依次往后四个、就是hdb8了
```
下面贴两张图片、让大家更加形象的理解

![linux和windows简单对比](http://7xpjaq.com1.z0.glb.clouddn.com/20160109135722.png)
![linux和win共存磁盘分区](http://7xpjaq.com1.z0.glb.clouddn.com/20160109140521.png)

## 磁盘挂载

### 1:场景

如果想访问光驱的内容、我们知道光驱的目录就是cdrom、如果按照往常的经验、我们会直接``` cd /dev/cdrom ``` 进入cdrom目录进行查看、而实际情况是、当我们执行刚才的命令、会出现 ``` cd:cdrom : Not a directory ``` 这样的提示、linux告诉我们、cdrom不是一个目录。为啥呢？原来linux把该目录当成了一个完整的设备、而不是目录。那么、我们怎么才能访问这个设备呢？那就要用到挂载了！

### 2:解释

linux采取了这样一个方式、你可以把这个设备看成一个目录、任何目录。你甚至可以把它看成根目录。只需要你用一条命令、将设备和该目录关联起来、这个时候、你就可以把设备当成一个文件夹来访问了。通常、我们把这种方式叫做挂载

### 3:操作

还是那个问题、如何才能访问cdrom呢？我们可以先建立一个我们想挂载的目录、一般约定将设备目录、放到根目录下面的mnt目录下面。然后将设备挂在到我们创建的目录上。具体操作如下

具体的操作步骤：

* 创建mnt设备目录、一般根目录下面会有该目录、如果没有、通过``` mkdir mnt ```创建。
* 创建光驱目录、```cd /mnt/ ```进入mnt设备目录下面、通过```mkdir cdrom```创建光驱目录。
* 通过mount命令、进行挂载。```mount /dev/cdrom /mnt/cdrom```、通该命令即可将光驱、挂在到可访问的目录cdrom上、此时、我们就可以进行访问了。

刚才使用mount命令后、会出现一些提示如下
* ```mount block device /dev/cdrom is write-protected, mounting read-only```、意思是、该设备是只读的不可写、但是挂载上了
* ```mount: no medium fount on /dev/sr0 ```、意思是该设备上找不到光驱、此时检查你的虚拟机配置、或者机器光驱是否损坏

好了、如果上述操作都成功的话、就可以通过```cd /mnt/cdrom```进入光驱目录进行查看了！

### 4:扩展

当然、我们可以通过mount命令进行挂载、那解除该如何解除挂在呢？也很简单```umount /dev/cdrom```通过上述命令、即可解除挂载。有的时候、解除挂载的时候、会出现```umount: /mnt/cdrom: device is busy```、这个时候、你就要看了、你是否还是在cdrom文件夹下面、退出该文件夹、再次执行命令就行了！

## 磁盘分区

### 1:分区方式

分区方式分两种：自动分区和手动分区

### 2:分区方案

#### 2.1:最简分区

* / 分区：跟分区
* SWAP 分区 ： 交换分区。把硬盘当内存使用、就是虚拟内存。(必须有、且必须是一个单独分区、一般情况下是实际物理内存的两倍)

##### 一定要分SWAP么?

那么有人问了、如果我的内存有16个G、我还有必要再建一个SWAP分区么？严格意义上、16G确实够用了!
但是,在linux上有些程序很特别、他默认你的物理内存不够使用、不管你内存多大、它都会把他的数据放到SWAP分区上、
所以说、SWAP分区必须建！

#### 2.2:个人桌面分区

* / 分区：跟分区
* /boot 分区： 该分区就装整个linux启动过程中所使用的文件和程序、该分区最好也要有
* /usr 分区：应用软件存放位置、类似windows的program Files
* SWAP 分区：交换分区

#### 2.3:我的分区

* / ： 根分区
* /usr ： 应用软件存放位置
* /home ： 用户宿主目录的父目录
* /var ： 存放临时文件
* /boot ： 存放启动文件 128M就够了
* SWAP ： 交换分区
	* 内存的两倍
	* 可以不分(不建议、有的程序会默认使用SWAP分区)
	* Windows中的PAGEFILE.SYS文件相当于交换分区

## linux目录结构

* / ：linux文件系统入口、也处于最高一级的目录;
* /bin：基础系统所需要的那些命令位于此目录、也是最小系统所需要的命令;比如```ls、cp、mkdir```等命令;功能和```/user/bin```类似、这个目录中的文件都是可执行的、普通用户都可以使用的命令。作为基础系统所需要的最基础的命令就是放在这里。
* /boot：linux的内核以及引导系统程序所需要的文件、比如```vmlinuzinitrd.img```文件都位于这个目录中。在一般情况下GRUB或LILO系统引导管理器也位于这个目录;
* /dev：设备文件存储目录,比如声卡、磁盘等;
* /etc：系统配置文件的所在地,一些服务器的配置文件也在这里;比如用户账号及密码的配置文件;
* /home：普通用户目录默认存放目录;
* /lib： 库文件存放目录
* /lost+fount：在ext2或ext3文件系统中，当系统意外崩溃或者机器意外关机、而产生一些文件碎片放在这里、当系统启动过程中fsck工具会检查这里、并修复已经损坏的文件系统。又是系统发生问题、有很多的文件被移到这个目录中、可能会用手工的方式来修复、或移动文件到原来的位置上。
* media：即插即用型存储设备的挂在点自动在这个目录下创建、比如USB盘系统自动挂载后、会在这个目录下产生一个目录;CDROM/DVD自动挂载后、也会在这个目录中创建一个目录、类似cdrom的目录
* /mnt：这个目录一般是用于存放挂载存储设备的挂在目录的、比如cdrom等目录
* /opt：表示的是可选择的意思、有些软件包也会被安装到这里、也就是自定义软件包、比如OpenOffice就是安装在这里。有些我们自己编译的软件包、就可以安装在这个目录中;
* /proc：操作系统运行时、进程(正在运行中的程序)信息及内核信息(比如cpu、硬盘分区、内存信息等)存放在这里。/proc目录伪装的系统文件proc的挂在目录，proc并不是真正的文件系统。
* /root：linux超级权限用户root的目录
* /sbin：大多是涉及系统管理的命令的存放、是超级权限用户root可执行命令存放地、普通用户无权限执行这个目录下的命令、这个目录和```/user/sbin```、```usr/X11R6/sbin```或```/usr/local/sbin```目录是相似的;我们记住就行、凡是目录sbin中包含的都是root权限才能执行的。
* /tmp：临时文件目录、有时用户运行程序的时候、会产生临时文件/tmp就用来存放临时文件的。```/var/tmp```目录和这个目录类似。
* /usr：这个是系统存放程序的目录、比如命令、帮助文件等。这个下面有很多文件和目录。当我们安装一个Linux发行版官方提供的软件包时、大多都安装在这里。如果有涉及服务器配置文件的、会把配置文件安装在```/etc```目录中。```/usr```目录下包括字体目录```/usr/share/fonts```、帮助目录```/usr/share/man```或```/usr/share/doc```、普通用户可执行文件目录```/usr/bin```或```/usr/local/bin```或```/usr/X11R6/bin、```超级权限用户root的可执行命令存放目录、比如```/usr/sbin```或```/usr/X11R6/sbin```或```/usr/local/sbin```等;还有程序的头文件存放目录```/usr/include```。
* /var：这个目录的内容是经常变动的、看名字就知道、我们可以理解为vary的缩写、```/var```下有```/var/log```、这是用来存放系统日志的目录。```/var/www```目录是定义Apache服务器站点存放目录;```/var/lib```用来存放一些库文件、比如MySQL的、以及MySQL数据库的存放地。
* /sbin：大多是设计系统管理的命令的存放、是超级用户root的可执行命令的存放地、普通用户无权限执行这个目录下的命令、这个目录和```/usr/sbin```;```/usr/X11R6```或```/usr/local/sbin```目录是相似的;我们记住就行了、凡是目录sbin包含的都是root权限才能执行的。
* /tmp：临时文件目录、又是用户运行程序的时候、会产生临时文件。```/tmp```就是用来粗放临时文件的。```/var/tmp```目录和这个目录类似

## linux启动过程

* load bois(hardware information)：自检、系统一开机、先运行固化在主板上的一套程序、然后就是检查自己的hardware information
* read MBR's config to find out the OS：加载MBR、(MBR在硬盘的第一个扇区、第一个磁道、第一个磁头的位置上)、在这个硬盘的启动的启动程序上找到我们要启动到底那一个操作系统
* load the kernel of the OS：当你要启动那一个系统的时候、就会找到那个系统所在的分区、并且根据这个系统的安装目录、找到这个操作系统启动的那个核心文件。
* init process starts.. ：首先会启动第一个进程init
* execute /etc/rc.d/sysinit：init进程启动后、首先执行etc目录下面rc.d下的sysinit
* start other modules(etc/modules.conf)：sysinit启动之后会把系统各种各样的模块加载进来、比如内存管理模块、硬盘管理的模块等等、只有这些模块load进来之后、系统的网络、硬盘、光驱这些才能用。
* execute the run level scripts：分层次启动、每个层次启动的程序不一样、每个层次没有关系、层次如下
	* 0 - 系统停机状态：机器直接关机
	* 1 - 单用户工作状态：只有一个用户root
	* 2 - 多用户状态(么有NFS)：只有一个用户、不可以和其他人联网
	* 3 - 多用户状态（有NFS）：只有一个用户、可以和其他人联网
	* 4 - 系统未使用、留给用户：系统没有使用
	* 5 - 图形界面
	* 6 - 系统正常关闭并重新启动
* execute /etc/rc.d/rc.local：运行```/etc/rc.d/rc.local```这个脚本、该脚本能控制软件是否自动启动。
* execute /bin/login：出现登录界面、让你登录
* shell started...：登陆后、系统启动、shell启动

 

 

 

 








