---
title: linux学习笔记之二、常用命令,权限管理学习
date: 2016-01-09 17:23:07
tags: linux
categories: 技术
---

linux学习笔记二 、包含一些基础命令、系统命令、linux用户权限管理、文件的类型及权限解释......<!-- more -->

## linux常用基础命令

### 基础命令

* ```ls```：列出当前目录下的所有目录和文件。注意：以d开头的都是目录、已-开头的都是文件、具体参数就不说了.
* ```cd```：进入目录.
* ```pwd```：当前路径是什么.
* ```mkdir```：创建目录.
* ```rmdir```：删除为空的目录、如何要删除不为空的目录、使用```rm -rf```.
* ```touch```：创建文件、从技术角度讲、Linux中文件的后缀名完全没意义、只有提示意义.
* ```rm```：删除文件
	* ```rm -r```：递归删除文件、会一步一步问你是否删除
	* ```rm -rf```：强制删除文件、不用问我、直接删除、也可删除不为空的目录
* ```cp```：拷贝
* ```mv```：移动
* ```vi```：文本编辑器
	* ```i```：刚进入文本编辑器、输入i进入编辑模式
    * ```o```：小写o往下插入一行、并且进入编辑模式
	* ```O```：大写O往上插入一行、且进入编辑模式
	* ```dd```：删除整行
	* ```dw```：删除一个单词
	* ```:q```：直接退出vim
	* ```:q!```：强制退出vim
	* ```:qw```：保存当前编辑、退出vim
	* 等等
* 打印文件
	* ```cat```：正序查看文件内容
	* ```tac```：倒叙查看文件内容
	* ```head```：可以指定查看内容如```head -3 文件名```打印前三行
	* ```tail```：显示文本文件的后若干行
	* ```more```：分页显示文本内容给
* ```find```：查文件。```find / -name xxx```可以全局查找、也可制定目录查找文件
* ```grep```：在指定文本文件中查找指定的字符串
* ```whereis```： 查找系统文件所在目录、如```whereis ls```就会查找ls命令和帮助文档所在目录还有
* ```echo```：打印命令、如```echo $path```就会输出所有的环境变量```echo $classpath```就会输出java的环境变量、windows下面类似```echo %path%```或者```echo %classpath%```。
* ```ln```：链接命令
	* ```ln```：硬链接、相当于将文件拷贝一份、关联起来、如```ln a.txt 4```会将a.txt的文件指向4、且两者内容关联、改一个、另一个就会变
	* ```ls -s```：软链接相、当于快捷方式```ln -s a.txt 4```给a.txt创建一个快捷方式4、如果删除a.txt、4就输出不了了、ln可以
* ```wc```：统计制定文本文件的行数、字数、字符数
* ```tree```：显示目录树
* ``` `` ```：命令替换、如``` echo date ```、只能输出date字符串、而``` echo `date` ```会将date当成命令、此时就会打印出时间信息
* ```wall```：warning all、警告所有人如```wall aaa```就会将aaa发送给所有登录上来的人

### 关于系统的命令

* date：显示和设置日期时间
* stat：显示指定文件的相关信息
* who、w：显示在线登录用户
* whoami：显示用户自己的身份
* id：显示当前用户的id信息
* hostname：显示主机名称
* uname：显示操作系统信息
* dmesg：显示系统启动信息
* du：显示制定的文件(目录)已使用的磁盘空间的总量
* df：显示文件系统磁盘空间的使用情况
* free：显示当前内存和交换控件的使用情况
* fdisk -l：显示磁盘信息
* locale：显示当前语言环境

### 管道命令

管道命令```|```意思就是、将上一条命令的结果交给下一条命令。

#### 使用方法

``` 命令1 | 命令2 | 命令3 ......| 命令n ```。

#### 使用举例

* ```ll /etc | more``` ： 将```ll /etc```命令的结果交给```more```进行分页
* ```cat /etc/passwd | wc```：将```cat /etc/passwd```打印的结果交给```wc```统计该结果的行数、字数、字符数
* ```cat /etc/passwd | grep testuser1```：将```cat /etc/passwd```的结果交给```grep testuser1```查询结果中的testuser1
* ```dmesg | grep eth0```：查询第一块网卡驱动的启动信息
* ```ls -l | grep "^d"```：只列出当前路径下所有的目录信息```^```是正则表达式、表示第一个的意思
* ```ls -l * | grep "^-" | wc -l```：```ls -l*```查询当前目录下所有文件信息、```grep "^-"```只查询文件、```wc -l```统计该结果的行数、字数、字符数、总结起来就是、统计当前目录下、所有文件(不包含目录和链接)的个数

### 重定向

重定向使用举例如下：

#### 重定向输出

* ```ls > ls.txt```：该命令无返回、但是会将```ls```执行的结果输出到ls.txt文件中、此时你查看```ls.txt```文件、就会有ls的结果
* ```ls >> ls.txt```：和上面的命令意思差不多、不同的是、将ls的结果、输出两遍到```ls.txt```文件中
* ```lss 2> ls.txt```：```2>```的意思是、将错误命令输出到文件、此时的```lss```明显是一条错误命令

#### 重定向输入

* ```wall < ls.txt```：该命令就会将```ls.txt```文件的内容读进来、通过```wall```警告命令、传给所有登录人员

## linux简单用户管理

### useradd：添加用户

#### 直接添加用户

```useradd testuser```、创建一个testuser用户、进入```/home```查看、就会发现多出了一个testuser用户文件夹、这个是系统自己新建的、同时```/etc/passwd```文件下面会出现testuser的信息、(passwd文件存储的是所有的用户信息)、```/etc/group```下也会有该用户的testuser的用户组信息、(添加用户的时候、如果不添加用户组信息、那么linux会自动给testuser添加一个组信息)

#### 添加用户同时、指定用户的分组

添加用户的时候、也可以指定用户的分组信息、比如现阶段有一个用户组叫做testgroup、那么就可以```useradd testuser -g testgroup```、这样就可以将该用户分配到该用户组下面了

#### 修改用户分组

``` usermod -g testgroup2 testuser  ``` 就可将原来testgroup用户组下面的testuser分配到testgroup2用户组下面

### groupadd：添加用户组

添加用户分组、比如```groupadd testgroup```就新建了一个用户组、```/etc/group```下面就会有testgroup分组信息

当一个用户登陆时、默认用户就是该用户的主目录

## 文件的类型及权限解释

为了更加形象的讲解、引入如下图片进行解释

![展示图片](http://7xpjaq.com1.z0.glb.clouddn.com/20160111160137.png)

### 解释
文件的类型及权限解释共有10个字母、除了第一个字幕代表的是文件类型外、其他的九个都代表该文件的权限解释、分三组、每组三个字母

### 文件类型含义

文件类型是红颜色框起来的、表示文件类型、解释如下

* -：代表文件
* l：代表链接
* d：代表目录

### 文件权限的含义

其他九个字母都表示文件的权限解释

* r：read
* w：write
* -：没有任何权限
* x：执行权限

### 文件分组的含义

* 第一组：黄色圈起来的三个字母、表示文件所有者对该文件的权限
* 第二组：粉红色圈起来的三个字母、表示这个文件所有者同组的其他人对该文件的权限
* 第三组：蓝色圈起来的三个字母、表示剩下的人对这个文件有什么权限

## 修改文件权限及所有者

### 修改文件权限

#### 普通修改方法

引入图片如下：

![展示图片](http://7xpjaq.com1.z0.glb.clouddn.com/20160111162956.png)

通过``` chmod +x a  ```、表示给a文件的所有用户添加可执行权限、```chmod -x a```表示将所有用户的执行权限去除

如果只想给指定的用户修改权限怎么办？如下。

* 当前用户：```chmod u+x a```、给当前用户添加可执行权限、u代表当前user、当前用户
* 同组其他用户：```chmod g+x a```、给同组其他用户加可执行权限、g表示group、同组其他用户
* 其他用户：```chmod o+x a```、给其他人加可执行权限、o表示others、其他用户

#### 专业用法

linux内部使用三个八进制数字表示文件的一组权限、三组三个加起来就是九位。所以Linux就是用9位来代表一个文件的所有权限。说起来比较麻烦、专门做了两个图片、如下：

![展示图片](http://7xpjaq.com1.z0.glb.clouddn.com/20160111170719.png)

![展示图片](http://7xpjaq.com1.z0.glb.clouddn.com/20160111172259.png)

感觉这样表示、大家就应该很清楚了。

### 修改文件所有者

引入图片如下：

![展示图片](http://7xpjaq.com1.z0.glb.clouddn.com/20160111165640.png)

使用```chown root a```、就可将a文件的所有者```testuser1```改成```root```了